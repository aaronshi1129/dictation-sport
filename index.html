
<html><head><base href=".">
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    background: white;
    padding: 20px;
  }

  .container {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    max-width: 800px;
    width: 90%;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    text-align: center;
  }

  .sentence {
    font-size: 1.2rem;
    margin: 20px 0;
    line-height: 1.6;
    color: #2c3e50;
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  button {
    background: #3498db;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1rem;
    transition: transform 0.2s, background 0.2s;
    margin: 5px;
  }

  button:hover {
    background: #2980b9;
    transform: scale(1.05);
  }

  .number {
    color: #e74c3c;
    font-weight: bold;
  }

  .button-group {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .input-area {
    margin: 20px 0;
    width: 100%;
  }

  #userInput {
    width: 90%;
    padding: 12px;
    font-size: 1rem;
    border: 2px solid #3498db;
    border-radius: 8px;
    margin: 10px 0;
  }

  .feedback {
    font-size: 1.1rem;
    margin: 15px 0;
    font-weight: bold;
    min-height: 24px;
  }

  .correct {
    color: #27ae60;
  }

  .incorrect {
    color: #e74c3c;
  }

  .disclaimer {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-top: 20px;
    font-style: italic;
  }

  .score-display {
    font-size: 1.1rem;
    color: #34495e;
    margin: 10px 0;
    padding: 8px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #dee2e6;
  }

  #correctScore {
    color: #27ae60;
    font-weight: bold;
  }

  #percentageScore {
    color: #2980b9;
    font-weight: bold;
  }

  .answer-display {
    font-size: 1.1rem;
    margin: 15px 0;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    color: #2c3e50;
    display: none;
  }

  .answer-display.show {
    display: block;
  }

  .pokemon-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .pokemon-modal-content {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    text-align: center;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    animation: modalPop 0.3s ease-out;
  }

  @keyframes modalPop {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .pokemon-image {
    margin: 20px 0;
    max-width: 200px;
    height: auto;
    animation: bounce 1s ease infinite;
  }

  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .continue-btn {
    background: #3498db;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1rem;
    transition: transform 0.2s, background 0.2s;
    margin-top: 20px;
  }

  .continue-btn:hover {
    background: #2980b9;
    transform: scale(1.05);
  }
</style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6V4ZXXZXS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z6V4ZXXZXS');
</script>
<body>
<div class="container">
  <h1>Listening Dictation (Sport)</h1>
    <p class="subtitle">Finish 5 tasks correctly and earn a Pokemon!</p>
  <div class="score-display">
    Score: <span id="correctScore">0</span> correct / <span id="totalAttempts">0</span> attempts 
    (<span id="percentageScore">0</span>%)
  </div>
  <div class="button-group">
    <button onclick="speakSentence()">
      <span>ðŸ”Š Read Aloud</span>
    </button>
  </div>
  <div class="input-area">
    <input type="text" 
           id="userInput" 
           placeholder="Type what you hear..."
           onkeypress="if(event.key === 'Enter') checkAnswer()">
  </div>
  <div id="feedback" class="feedback"></div>
  <div id="answerDisplay" class="answer-display"></div>
  <div class="button-group">
    <button onclick="generateSentence()">Get New Sentence</button>
    <button onclick="checkAnswer()">Check Answer</button>
    <button onclick="showAnswer()">Show Answer</button>
  </div>
  <p class="disclaimer">
    The sentences do not represent statistical facts. They are only used to practice English listening, writing, and numbers.
  </p>
  <p class="disclaimer" style="margin-bottom: 0; font-style: normal;">
    Author: Aaron Shi. Released in 2024. Last update on November 23, 2024
  </p>
</div>

<script>
const POKEMON_COUNT = 151; // Number of original Pokemon
let fiveCorrectCounter = 0; // Track progress towards 5 correct answers
const templates = [
  "I prefer playing tennis over basketball.",
  "Do you like watching football on weekends?",
  "Heâ€™s really good at swimming, but he doesnâ€™t play often.",
  "I enjoy playing soccer with my friends every Friday.",
  "She plays volleyball twice a week.",
  "Iâ€™m not very good at basketball, but I enjoy watching it.",
  "How often do you play cricket?",
  "I prefer running to cycling because itâ€™s quicker.",
  "They usually practice gymnastics every Sunday.",
  "I try to go hiking every month, weather permitting.",
  "I used to play tennis in high school, but not anymore.",
  "Sheâ€™s amazing at archery, but she only practices on weekends.",
  "How often do you go to the gym for weight training?",
  "I love skiing, especially during winter vacations.",
  "Heâ€™s an expert at golf, but he plays once a month.",
  "Do you enjoy playing badminton in your free time?",
  "I play table tennis with my colleagues during lunch breaks.",
  "Sheâ€™s been practicing martial arts for five years now.",
  "I donâ€™t like playing rugby, but I enjoy watching it.",
  "How often do you go for a run?",
  "He enjoys cycling to work every day.",
  "Iâ€™m not very good at skating, but I try it sometimes.",
  "They go bowling every Saturday night.",
  "I usually go swimming at the beach during summer.",
  "She does yoga every morning to stay fit.",
  "Do you know how to play squash?",
  "I play basketball only when my friends ask me to.",
  "I prefer playing individual sports like tennis over team sports.",
  "They play soccer every evening after work.",
  "I enjoy playing badminton, but I donâ€™t do it very often.",
  "He practices boxing every other day.",
  "Iâ€™ve been practicing golf for a year, but Iâ€™m still a beginner.",
  "Do you like playing sports in the morning or evening?",
  "Iâ€™ve always enjoyed playing football since I was a child.",
  "She prefers running outside rather than on a treadmill.",
  "I usually play volleyball on weekends with my friends.",
  "How good are you at swimming?",
  "I donâ€™t play sports regularly, but I like to stay active.",
  "He plays tennis only when the weather is nice.",
  "She loves playing table tennis with her friends after school.",
  "Iâ€™m really into rock climbing, but I only go once a month.",
  "How often do you go to the gym to work out?",
  "Iâ€™ve never tried baseball, but Iâ€™d like to someday.",
  "I play hockey every winter with my cousins.",
  "She practices badminton twice a week to improve her skills.",
  "I love surfing, but I can only do it during vacations.",
  "He plays football every weekend, rain or shine.",
  "Do you prefer individual sports or team sports?",
  "I try to go jogging three times a week.",
  "They go rock climbing on the weekends.",
  "I prefer playing sports that involve a ball.",
  "Sheâ€™s great at tennis, but she only plays in the summer."
];

let correctAnswers = 0;
let totalAttempts = 0;

let currentSentence = '';

function getRandomNumber(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function generateSentence() {
  const template = templates[Math.floor(Math.random() * templates.length)];
  let number;
  
  // Generate factually accurate random numbers within reasonable ranges
  if (template.includes("social media")) {
    number = getRandomNumber(120, 170);
  } else if (template.includes("blinks")) {
    number = getRandomNumber(25000, 30000);
  } else if (template.includes("adult laughs")) {
    number = getRandomNumber(15, 20);
  } else if (template.includes("heart beats")) {
    number = getRandomNumber(95000, 105000);
  } else if (template.includes("emails")) {
    number = getRandomNumber(100, 140);
  } else if (template.includes("gallons of water")) {
    number = getRandomNumber(300, 340);
  } else if (template.includes("watching television")) {
    number = getRandomNumber(180, 220);
  } else if (template.includes("commuting")) {
    number = getRandomNumber(45, 60);
  } else if (template.includes("check their smartphones")) {
    number = getRandomNumber(80, 110);
  } else if (template.includes("calories")) {
    number = getRandomNumber(2000, 3000);
  } else if (template.includes("child laughs")) {
    number = getRandomNumber(250, 350);
  } else if (template.includes("steps")) {
    number = getRandomNumber(7000, 8000);
  } else {
    // Default random number for other cases
    number = getRandomNumber(10, 120);
  }

  currentSentence = template.replace("NUMBER", number);
  
  // Clear the input and feedback
  document.getElementById("userInput").value = "";
  document.getElementById("feedback").textContent = "";
  document.getElementById("feedback").className = "feedback";
  document.getElementById("answerDisplay").classList.remove("show");
  
  // Automatically speak the new sentence
  speakSentence();
}

function speakSentence() {
  if (!currentSentence) {
    currentSentence = document.getElementById("sentenceDisplay").textContent;
  }
  
  window.speechSynthesis.cancel();
  
  const utterance = new SpeechSynthesisUtterance(currentSentence);
  
  utterance.rate = 0.9;
  utterance.pitch = 1;
  utterance.volume = 1;
  
  const voices = window.speechSynthesis.getVoices();
  if (voices.length > 0) {
    const englishVoice = voices.find(voice => voice.lang.startsWith('en-'));
    if (englishVoice) {
      utterance.voice = englishVoice;
    }
  }
  
  window.speechSynthesis.speak(utterance);
}

function checkAnswer() {
  const userInput = document.getElementById("userInput").value.trim().toLowerCase();
  const correctAnswer = currentSentence.toLowerCase();
  const feedbackElement = document.getElementById("feedback");
  
  totalAttempts++;
  
  if (userInput === correctAnswer) {
    correctAnswers++;
    fiveCorrectCounter++;
    feedbackElement.textContent = "ðŸŽ‰ Excellent! That's correct!";
    feedbackElement.className = "feedback correct";
    
    // Check if user has completed 5 correct answers
    if (fiveCorrectCounter === 5) {
      const randomPokemonId = Math.floor(Math.random() * POKEMON_COUNT) + 1;
      showPokemonReward(randomPokemonId);
      fiveCorrectCounter = 0; // Reset counter
    }
  } else {
    feedbackElement.textContent = "Keep trying! Listen again and type what you hear.";
    feedbackElement.className = "feedback incorrect";
  }
  
  // Update score display
  document.getElementById("correctScore").textContent = correctAnswers;
  document.getElementById("totalAttempts").textContent = totalAttempts;
  document.getElementById("percentageScore").textContent = 
    Math.round((correctAnswers / totalAttempts) * 100);
}

function showAnswer() {
  const answerDisplay = document.getElementById("answerDisplay");
  answerDisplay.textContent = currentSentence;
  answerDisplay.classList.add("show");
  
  // Hide the answer after 5 seconds
  setTimeout(() => {
    answerDisplay.classList.remove("show");
  }, 5000);
}

function showPokemonReward(pokemonId) {
  // Create and show modal
  const modal = document.createElement('div');
  modal.className = 'pokemon-modal';
  modal.innerHTML = `
    <div class="pokemon-modal-content">
      <h2>Congratulations! ðŸŽ‰</h2>
      <p>You've successfully finished five listening dictation tasks. You've won this Pokemon!</p>
      <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${pokemonId}.png" 
           alt="Pokemon reward" 
           class="pokemon-image"
           width="200" 
           height="200">
      <button onclick="closePokemonModal()" class="continue-btn">Continue Practicing</button>
    </div>
  `;
  document.body.appendChild(modal);
}

function closePokemonModal() {
  const modal = document.querySelector('.pokemon-modal');
  if (modal) {
    modal.remove();
    generateSentence(); // Generate new sentence after closing modal
  }
}

speechSynthesis.onvoiceschanged = function() {
  window.speechSynthesis.getVoices();
};

window.onload = generateSentence;
</script>
</body></html>
